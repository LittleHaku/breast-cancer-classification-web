{% extends 'base.html' %}

{% load static %}

{% block title %}Classifier Comparison{% endblock %}

{% block content %}
<div class="content">
    <div>
        <h2>Comparison: <a href="{% url 'classifier_detail' classifier1.id %}">{{ classifier1.name }}</a> vs <a
                href="{% url 'classifier_detail' classifier2.id %}">{{ classifier2.name }}</a></h2>

        <table>
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>{{ classifier1.name }}</th>
                    <th>{{ classifier2.name }}</th>
                </tr>
            </thead>
            <tbody>
                {% for metric1, metric2 in metrics %}
                <tr>
                    <td><strong>F1 Score</strong></td>
                    <td>{{ metric1.f1_score }}</td>
                    <td>{{ metric2.f1_score }}</td>
                </tr>
                <tr>
                    <td><strong>Recall</strong></td>
                    <td>{{ metric1.recall }}</td>
                    <td>{{ metric2.recall }}</td>
                </tr>
                <tr>
                    <td><strong>F2 Score</strong></td>
                    <td>{{ metric1.f2_score }}</td>
                    <td>{{ metric2.f2_score }}</td>
                </tr>
                <tr>
                    <td><strong>Balanced Accuracy</strong></td>
                    <td>{{ metric1.balanced_accuracy }}</td>
                    <td>{{ metric2.balanced_accuracy }}</td>
                </tr>

            </tbody>
        </table>
        <h3>Confusion Matrices</h3>
        <div class="confusion-matrices">

            <img src="{% static metric1.confusion_matrix %}" alt="Confusion Matrix"
                style="max-width: 800px; height: auto;">

            <img src="{% static metric2.confusion_matrix %}" alt="Confusion Matrix"
                style="max-width: 800px; height: auto;">

        </div>

        <h3>Feature Importance</h3>

        <details>
            <summary>Click here to see global features importance</summary>
            <div class="plots">
                <table>
                    <tr>
                        <th colspan="2">
                            <h3>Bar Plot</h3>
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <h4>{{ classifier1.name }}</h4>
                            <img src="{% static metric1.global_features_plot %}" alt="Global Features Plot"
                                style="max-width: 500px; height: auto;">
                        </td>
                        <td>
                            <h4>{{ classifier2.name }}</h4>
                            <img src="{% static metric2.global_features_plot %}" alt="Global Features Plot"
                                style="max-width: 500px; height: auto;">
                        </td>
                    </tr>
                    <tr>
                        <th colspan="2">
                            <h3>Beeswarm Plot</h3>
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <h4>{{ classifier1.name }}</h4>
                            <img src="{% static metric1.beeswarm_plot %}" alt="Beeswarm Plot"
                                style="max-width: 500px; height: auto;">
                        </td>
                        <td>
                            <h4>{{ classifier2.name }}</h4>
                            <img src="{% static metric2.beeswarm_plot %}" alt="Beeswarm Plot"
                                style="max-width: 500px; height: auto;">
                        </td>
                    </tr>
                </table>

        </details>
    </div>
    {% endfor %}

    <div>
        <h3>Single Feature Comparison</h3>

        {% for feature1, feature2 in features %}
        <details>
            <summary>Click here to see {{ feature1.name }}</summary>
            <table>
                <tr>
                    <td>
                        <div class="feature">
                            <h4>{{ classifier1.name }}</h4>
                            <img src="{% static feature1.mean_path %}" alt="Mean Plot"
                                style="max-width: 500px; height: auto;">
                            <img src="{% static feature1.error_path %}" alt="Error Plot"
                                style="max-width: 500px; height: auto;">
                            <img src="{% static feature1.worst_path %}" alt="Worst Plot"
                                style="max-width: 500px; height: auto;">
                        </div>

                    </td>
                    <td>
                        <div class="feature">
                            <h4>{{ classifier2.name }}</h4>
                            <img src="{% static feature2.mean_path %}" alt="Mean Plot"
                                style="max-width: 500px; height: auto;">
                            <img src="{% static feature2.error_path %}" alt="Error Plot"
                                style="max-width: 500px; height: auto;">
                            <img src="{% static feature2.worst_path %}" alt="Worst Plot"
                                style="max-width: 500px; height: auto;">
                        </div>
                    </td>
                </tr>
            </table>
        </details>
        {% endfor %}


    </div>
</div>
{% endblock %}